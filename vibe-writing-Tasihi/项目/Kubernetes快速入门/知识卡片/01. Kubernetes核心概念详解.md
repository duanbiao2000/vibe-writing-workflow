## Kubernetes核心概念详解

在学习Kubernetes的过程中，理解其核心概念是非常重要的基础。这些概念构成了Kubernetes的基石，帮助我们理解系统如何工作以及如何有效使用它。

### Pod - 最小部署单元

Pod是Kubernetes中最小的可部署单元，它代表了集群中运行的一个进程实例。

**工作机制**：
- **共享网络**：Pod中的所有容器共享同一个网络命名空间，拥有相同的IP地址和端口空间
- **共享存储**：Pod可以定义卷（Volumes），Pod中的所有容器都可以访问这些卷
- **生命周期**：Pod是短暂的，一旦被销毁就不会复活，这也是为什么需要Deployment等控制器来管理Pod的原因

**使用场景**：
- **单容器Pod**：最常见的形式，适用于单一应用
- **多容器Pod**：适用于紧密耦合的应用组件，例如：
  - 主应用容器 + 日志收集容器
  - Web服务器容器 + 数据预处理容器

### Deployment - 应用管理器

Deployment为Pod和ReplicaSet提供声明式更新，是管理无状态应用的最佳选择。

**核心功能**：
- **声明式管理**：通过声明期望状态来管理应用
- **滚动更新**：在不中断服务的情况下更新应用
- **回滚机制**：当更新出现问题时可以快速回滚到之前的版本
- **扩缩容**：可以根据需求调整应用实例的数量

**更新策略**：
- **RollingUpdate**（默认）：逐个替换Pod，确保服务不中断
- **Recreate**：先删除所有旧Pod，再创建新Pod

### Service - 网络接入点

Service为一组Pod提供稳定的网络访问入口，屏蔽了Pod的动态变化。

**四种主要类型**：
- **ClusterIP**（默认）：仅在集群内部可访问，提供集群内部服务发现
- **NodePort**：在每个节点上开放一个端口，对外提供访问
- **LoadBalancer**：在云平台上创建外部负载均衡器
- **ExternalName**：将服务映射到DNS名称

**负载均衡机制**：
- Service通过标签选择器（Label Selector）找到对应的Pod
- kube-proxy组件负责实现服务的负载均衡和网络转发
- 支持session affinity（会话亲和性）以保持客户端连接的一致性

### 核心概念间的关联关系

这些核心概念并不是孤立存在的，它们之间有着密切的关联：

1. **Pod与Deployment**：Deployment管理Pod的生命周期，确保指定数量的Pod副本始终运行
2. **Pod与Service**：Service通过标签选择器找到对应的Pod，为它们提供稳定的访问入口
3. **Deployment与Service**：Deployment确保应用正常运行，Service确保应用可以被访问

理解这些核心概念及其相互关系，是掌握Kubernetes的关键基础。